-- -- Create tasks table (for admin to create design tasks)
-- CREATE TABLE tasks (
--   id bigint generated by default as identity primary key,
--   created_at timestamp with time zone default timezone('utc'::text, now()) not null,
--   title text not null,
--   category text not null,
--   description text,
--   admin_id text not null,
--   image_url text,
--   status text default 'pending'
-- );

-- -- Create uploads table (for water role to upload marked designs)
-- CREATE TABLE uploads (
--   id bigint generated by default as identity primary key,
--   created_at timestamp with time zone default timezone('utc'::text, now()) not null,
--   task_id bigint references tasks(id) on delete cascade,
--   task_name text not null,
--   designer_id text not null,
--   image_url text not null
-- );

-- -- Create user_assignments table (to track which designer is assigned to which task)
-- CREATE TABLE user_assignments (
--   id bigint generated by default as identity primary key,
--   created_at timestamp with time zone default timezone('utc'::text, now()) not null,
--   task_id bigint references tasks(id) on delete cascade,
--   designer_id text not null,
--   assigned_at timestamp with time zone default timezone('utc'::text, now())
-- );

-- -- Enable Row Level Security
-- ALTER TABLE tasks ENABLE ROW LEVEL SECURITY;
-- ALTER TABLE uploads ENABLE ROW LEVEL SECURITY;
-- ALTER TABLE user_assignments ENABLE ROW LEVEL SECURITY;

-- -- Create indexes for faster queries
-- CREATE INDEX idx_uploads_task_id ON uploads(task_id);
-- CREATE INDEX idx_uploads_designer_id ON uploads(designer_id);
-- CREATE INDEX idx_user_assignments_task_id ON user_assignments(task_id);
-- CREATE INDEX idx_user_assignments_designer_id ON user_assignments(designer_id);
